# =============================================================================
# Bharat Agents - Tasks Service Environment Configuration
# =============================================================================
# 
# This file contains environment variables specific to the Tasks service.
# Copy this file to .env.development.local and update the values.
#
# IMPORTANT: Never commit real secrets to version control!
# Use Doppler, 1Password, AWS SSM, or similar secret management tools.
# =============================================================================

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================

# Service name for logging and identification
SERVICE_NAME=tasks

# Service port (should not conflict with other services)
PORT=3001

# Node.js environment
NODE_ENV=development

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection URL
# For local development, use the shared database
POSTGRES_URL=postgresql://bharat_user:bharat_password@localhost:5432/bharat_agents

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Redis connection URL
# For local development, use the shared Redis instance
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# S3-compatible storage endpoint
# For local development, use MinIO
S3_ENDPOINT=http://localhost:9000

# S3 access key
S3_ACCESS_KEY=minioadmin

# S3 secret key
S3_SECRET_KEY=minioadmin

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT secret for token signing (minimum 32 characters)
# Use a strong random string for production
JWT_SECRET=your_very_long_jwt_secret_key_at_least_32_characters_long_here

# =============================================================================
# AI/ML CONFIGURATION (Optional in Phase 0)
# =============================================================================

# OpenAI API key (optional - will use Gemini 2.0 Flash by default)
# Only required if you want to use OpenAI models
# OPENAI_API_KEY=sk-your-openai-api-key-here

# =============================================================================
# AGENT ORCHESTRATION CONFIGURATION
# =============================================================================

# Enable async job processing using BullMQ queues
# Set to true to queue heavy work instead of synchronous execution
ASYNC_JOBS=false

# Node execution timeout in milliseconds (per-agent execution)
AGENT_NODE_TIMEOUT_MS=30000

# Run execution timeout in milliseconds (overall run timeout)
AGENT_RUN_TIMEOUT_MS=300000

# Maximum LLM calls allowed per run (for GEN agent)
MAX_LLM_CALLS_PER_RUN=10

# Maximum browser automation steps allowed per run (for BROWSER agent)
MAX_BROWSER_STEPS_PER_RUN=50

# Agent queue concurrency (number of parallel agent jobs)
AGENT_QUEUE_CONCURRENCY=5

# Browser queue concurrency (number of parallel browser jobs)
BROWSER_QUEUE_CONCURRENCY=2

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (debug, info, warn, error)
LOG_LEVEL=debug

# Enable request logging
ENABLE_REQUEST_LOGGING=true

# =============================================================================
# DEVELOPMENT-SPECIFIC CONFIGURATION
# =============================================================================

# Enable hot reloading
ENABLE_HOT_RELOAD=true

# Enable detailed error messages
ENABLE_DETAILED_ERRORS=true

# Enable CORS for development
ENABLE_CORS=true

# CORS origin (for development)
CORS_ORIGIN=http://localhost:3000

# =============================================================================
# SECRET MANAGEMENT RECOMMENDATIONS
# =============================================================================
#
# For production environments, use one of these secret management solutions:
#
# 1. Doppler (Recommended)
#    - Install: curl -Ls --tlsv1.2 --proto "=https" --retry 3 https://cli.doppler.com/install.sh | sh
#    - Setup: doppler setup
#    - Usage: doppler run -- pnpm dev
#
# 2. 1Password CLI
#    - Install: brew install 1password-cli (macOS) or download from 1password.com
#    - Setup: op signin
#    - Usage: op run -- pnpm dev
#
# 3. AWS Systems Manager Parameter Store
#    - Store secrets as SecureString parameters
#    - Use AWS SDK to retrieve in application
#    - IAM roles required for access
#
# =============================================================================

# Browser service configuration
BROWSER_SERVICE_URL=http://localhost:3002
ALLOW_EVALUATE=false

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Per-user rate limit (requests per minute)
USER_RATE_LIMIT_PER_MINUTE=120

# Per-user concurrent run limit
USER_MAX_CONCURRENT_RUNS=3

# =============================================================================
# OPENTELEMETRY CONFIGURATION
# =============================================================================

# OTLP endpoint for traces and metrics
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# OTLP headers (JSON format)
# OTEL_EXPORTER_OTLP_HEADERS={"authorization": "Bearer your-token"}

# =============================================================================
# DATA PROTECTION CONFIGURATION
# =============================================================================

# Enable artifact encryption at rest
ENABLE_ARTIFACT_ENCRYPTION=false

# MinIO endpoint for encrypted storage
# MINIO_ENDPOINT=http://localhost:9000

# MinIO access key
# MINIO_ACCESS_KEY=minioadmin

# MinIO secret key
# MINIO_SECRET_KEY=minioadmin

# MinIO bucket for artifacts
# MINIO_BUCKET=artifacts

# Agent orchestration configuration
